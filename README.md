# arch_hh

## Вопрос 1:
> Представим, что у нас есть данные, которые мы очень часто читаем по сравнению с другими(например словарь стран). Как можно это оптимизировать?

### Отвечаю:
+ Оптимизация постоянных данных довольно частый вопрос, возникающий во время разработки.

+ В принципе, все зависит от того, где конкретно мы хотим оптимизировать (если, конечно, не везде).
Если данных много, то есть смысл вывести отдельный индекс на сервере под такое, и отдельно его оптимизировать под частые запросы (хз как, я дурачок с фронта).

+ Наиболее очевидный вариант это кешировать необходимые данные. Так как новые страны появляются довольно редко, то кешировать подобный словарь не должно составлять проблемы. При чем кешировать можно как на стороне бека, так и на фронте при необходимости (в случае веб-приложения).

+ Конечно, в том случае, если данные меняются чаще, чем страны, то есть смысл на кеш повесить таймер смерти, либо, например, по хэшкоду сравнивать данные на клиенте и беке и в случае различия обновлять эти данные.

+ Помимо прочего, сами данные можно хранить непосредственно в коде через встроенные словари и подгружать их лениво - опять же, либо на фронте, либо на беке.

+ Наверняка еще кто-нибудь советовал использовать что-то типа Редиски или Монго для хранения данных.

+ Из наиболее забавных способов, можно кешировать непосредственно в ОЗУ, но зачем.

## Вопрос 2:
> Что можно сделать, если таблица вакансий стала слишком большой? Какие есть решения на уровне текущей базы данных? Можно ли ее чем то заменить?

### Отвечаю:
*Как говорится, KISS.*

+ На самом деле это действительно очевидный вариант - когда что-то становится слишком большим, его надо разделять на более мелкие части (главное не увлечься слишком сильно). При чем тут можно как и разделять через partitioning, а можно и шардить (или на чанки делить, но я не знаю, используют ли это на беке, так что не бейте сильно), или на кластеры делить. Минус, правда, в том, что это поддерживать сложнее становится (особенно если документация не ведется), но что поделать.

+ Помимо прочего можно в целом подойти к вопросу с точки зрения инструментария, и посмотреть, есть ли более идеальный вариант для конкретного случая (но это если либо проект маленький, либо денег много лишних стало).

## Вопрос 3:
> Какие вы видите узкие места, возможно неправильно выбранные технологии в текущей схеме(можно рассмотреть как “нашу” схему, так и схему настоящего hh.ru)

### Отвечаю:
Про псевдореальную схему.
+ Ну к инструментарию у меня вопросов нет - лишь бы исполняло свою задачу эффективно (единственное, что TypeScript это не фреймворк/библиотека, а его как полноценный язык выделяют, ну да ладно).

+ Вообще задание немного некомфортное, учитывая то, что оно как бы общее, а про фронтовую часть тут практически ничего, поэтому и не подсказать ничего.

+ У меня в рабочем случае был мем, когда авторизация буквально сжирала 2-3 секунды времени без особых причин. Связано это было с тем, что часть микросервисов на беке не запускалась, пока не будет пройдена авторизация, хотя для этих сервисов она не нужна была от слова совсем, а для работы приложения сервисы, соответственно, были нужны. Поэтому тут можно разделить процессы, чтобы часть сервисов запускалась вне зависимости от факта авторизации. Ну и правильное распределение не только запусков процессов, но и хранение их по различным (наиболее оптимизированным под конкретную задачу) кластерам может повысить производительность.

+ На самом деле микросервисы это беда, особенно когда они превращаются в наносервисы и прочие -сервисы. Нет, я понимаю их необходимость, но в тот момент, когда они превращаются в кашу из миллиона микросервисов (как на схеме) возникает резонный вопрос: "WTF?". Поэтому стоит задуматься о том, чтобы избавиться от части микросервисов (особенно, если они в различных репозиториях еще хранятся, а не в каком-то более-менее монорешении) в пользу их укрупнения, а то и "джерримондеринга" их (то есть перераспределение функционала части микросервисов в пользу других ради оптимизации процессов (например, наиболее близких по смыслу), но без итогового капитального изменения их количества).

+ Объединяя два прошлых ответа, есть смысл вообще посмотреть, в какой момент эти микросервисы должны исполняться. Вполне возможно, что есть смысл перенести часть из них на более высокий уровень (например, непосредственно вызывая из фронта), хотя, конечно, это довольно затратно с точки зрения процессов (еще есть большой риск из техдолга не выбраться примерно никогда).
